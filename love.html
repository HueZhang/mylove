<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>ç»™ä½ çš„æƒŠå–œ ğŸ’</title>
    <style>
      body {
        background: radial-gradient(circle at center, #ffe0f0, #ffb6c1);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
        margin: 0;
      }

      #gift-box {
        position: relative;
        width: 150px;
        height: 150px;
        background: #ff4081;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        transition: transform 0.3s;
      }

      #gift-lid {
        position: absolute;
        top: -30px;
        left: 0;
        width: 150px;
        height: 40px;
        background: #d81b60;
        border-radius: 10px 10px 0 0;
        transition: transform 0.8s ease-out;
      }

      #gift-box.open #gift-lid {
        transform: translateY(-80px) rotate(-15deg);
      }

      .popup {
        position: absolute;
        padding: 10px 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        font-family: "å¾®è½¯é›…é»‘", sans-serif;
        animation: fadeUp 1.5s ease forwards;
      }

      @keyframes fadeUp {
        0% {
          opacity: 0;
          transform: translateY(50px) scale(0.8);
        }
        50% {
          opacity: 1;
          transform: translateY(-10px) scale(1.1);
        }
        100% {
          opacity: 0;
          transform: translateY(-100px) scale(0.8);
        }
      }

      #tip {
        position: absolute;
        bottom: 20px;
        font-family: "å¾®è½¯é›…é»‘";
        color: #c2185b;
        font-size: 1.1em;
        opacity: 0.9;
      }
    </style>
  </head>
  <body>
    <div id="gift-box">
      <div id="gift-lid"></div>
    </div>
    <div id="tip">âœ¨ è½»è½»ç‚¹ä¸€ä¸‹ç¤¼ç‰©ç›’ âœ¨</div>

    <audio
      id="bgm"
      src="https://huezhang.github.io/mylove/static/sorry.mp3"
      preload="auto"
      loop
    ></audio>

    <script>
      const box = document.getElementById("gift-box");
      const lid = document.getElementById("gift-lid");
      const tip = document.getElementById("tip");
      const bgm = document.getElementById("bgm");

      const loveSentences = [
        "å–œæ¬¢ä½ ï¼Œæ˜¯æˆ‘åšè¿‡æœ€ç”œçš„ä¸€ä»¶äº‹ ğŸ’—",
        "ä½ ä¸€å‡ºç°ï¼Œæ•´ä¸ªä¸–ç•Œéƒ½äº®äº† âœ¨",
        "æƒ³å’Œä½ ä¸€èµ·æµªè´¹æ—¶é—´ï¼Œä¸€èµ·è™šåº¦å¹´å ğŸ•Šï¸",
        "æœ‰ä½ åœ¨çš„åœ°æ–¹ï¼Œè¿ç©ºæ°”éƒ½æ˜¯ç”œçš„ ğŸ“",
        "ä½ ç¬‘çš„æ ·å­ï¼Œè¶³ä»¥æŠµè¿‡ä¸–é—´æ‰€æœ‰é£æ™¯ ğŸ’",
      ];

      function showPopup() {
        const popup = document.createElement("div");
        popup.className = "popup";
        popup.innerText =
          loveSentences[Math.floor(Math.random() * loveSentences.length)];
        document.body.appendChild(popup);
        popup.style.left = Math.random() * (window.innerWidth - 150) + "px";
        popup.style.top = Math.random() * (window.innerHeight - 150) + "px";

        setTimeout(() => popup.remove(), 1500);
      }

      function startLove() {
        setInterval(showPopup, 800); // å¼¹å‡ºæ›´å¿«ä¸€ç‚¹
      }

      box.addEventListener("click", async () => {
        if (box.classList.contains("open")) return;
        box.classList.add("open");
        tip.innerText = "ğŸ¶ æ‰“å¼€ä¸­â€¦";

        try {
          await bgm.play(); // ç”¨æˆ·ç‚¹å‡»è§¦å‘æ’­æ”¾
        } catch (e) {
          console.log("æ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨äº¤äº’ï¼š", e);
        }

        // åŠ¨ç”»ç»“æŸåå¼€å§‹å¼¹çª—
        setTimeout(() => {
          tip.style.display = "none";
          startLove();
        }, 1500);
      });
    </script>
  </body>
</html>
